!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var r=e.focusFly,t=e.focusFly=n();t.noConflict=function(){return e.focusFly=r,t}}())}(this,(function(){"use strict";function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,(u=t.key,o=void 0,"symbol"==typeof(o=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(u,"string"))?o:String(o)),t)}var u,o}function n(){return n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},n.apply(this,arguments)}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function t(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var u=0;return function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=function(e){return Object.prototype.toString.call(e)},o=function(e){return"[object Object]"===u(e)},i=function(e){return"[object Function]"===u(e)},c=function(){return document.activeElement},l=function(e){return"string"==typeof e?(n=e,document.querySelector(n)):e;var n},a=function(e){setTimeout(e,0)},f=function(e){return"Enter"===e.key||13===e.keyCode},v=function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode},s=function(e){return"Tab"===e.key||9===e.keyCode},d=function(e){return s(e)&&!e.shiftKey},p=function(e){return s(e)&&e.shiftKey},h=function(e){var n;e.focus(),(n=e).tagName&&"input"===n.tagName.toLowerCase()&&"function"==typeof n.select&&e.select()},y=function(e){null==e?a((function(){return e&&h(e)})):h(e)},I=function(e,n,r,u){for(var o,c=!1,l=t(e);!(o=l()).done;){var a=o.value;if(i(a))c=a(n,r,u);else{var f=a.shift,v=a.meta,s=a.alt,d=a.ctrl,p=a.commonKey;c=(f&&n.shiftKey||!(f||n.shiftKey))&&(v&&n.metaKey||!(v||n.metaKey))&&(s&&n.altKey||!(s||n.altKey))&&(d&&n.ctrlKey||!(d||n.ctrlKey))&&(null==p||p===n.key)}if(c)return c}return c},g=function(e,n){return[].concat(e).map((function(e){return"string"==typeof e?function(e){for(var n,r=e.indexOf("-"),t=-1===r?e:0===r?"-":e.slice(0,r),u=e.replace(t,""),o=[t],i=/-(?:-|[^-]+)/g;n=i.exec(u);)o.push(n[0].slice(1));for(var c=!1,l=!1,a=!1,f=!1,v=null,s=new Map([["Shift",function(){return c=!0}],["Meta",function(){return l=!0}],["Alt",function(){return a=!0}],["Control",function(){return f=!0}]]),d=0;d<o.length;++d){var p=s.get(o[d]);null==p?v=o[d]:p()}return{shift:c,meta:l,alt:a,ctrl:f,commonKey:v}}(e):null!=e?e:n}))},m=function(e,n,r){var t;return null!==(t=l(e))&&void 0!==t?t:function(e,n){if(null==e||null==n)return null;if(e.contains(n))return e;if(n.contains(e))return n;var r=new Range;return r.setStartBefore(e),r.setEndAfter(n),r.collapsed&&(r.setStartBefore(n),r.setEndAfter(e)),r.commonAncestorContainer}(n,r)},k=function(e){var n=e.map((function(e){return l(e)})).filter((function(e){return null!=e})),r=n[0],t=n.slice(-1)[0];return{list:n,head:r,tail:t}},E=function(e,n,r){return n?r:l(e)},b=function(e,n,r,t){var u=k(n),o=u.list,i=u.head,c=u.tail,l=m(e,i,c);return{root:l,list:o,head:i,tail:c,cover:E(r,t,l)}},x=function(e,r){var t=Array.isArray(r.node)?r.node.map((function(e){return n({},r,{node:e})})):r;return e.concat(t)},w=function(e,n){var r=e.reduce((function(e,r){var t,u=e[0],o=e[1],c=e[2],a=e[3],f=e[4],v=e[5],s=function(e){var n;return null===(n=r.type)||void 0===n?void 0:n.includes(e)};return t=r.node,i(t)||null!=t&&n.contains(l(t))||null==t?(s("keydown")&&(u=u.concat(r)),s("click")&&(o=o.concat(r)),s("focus")&&(c=c.concat(r)),s("outlist")&&(v=v.concat(r))):(s("click")&&(a=a.concat(r)),s("focus")&&(f=f.concat(r)),s("outlist")&&(v=v.concat(r))),[u,o,c,a,f,v]}),new Array(6).fill([])),t=r[0],u=r[1],o=r[2],c=r[3],a=r[4],f=r[5];return{keyExits:t,clickExits:u,focusExits:o,hasClickExits:u.length>0,hasFocusExits:o.length>0,hasKeyExits:t.length>0,clickExits_wild:c,focusExits_wild:a,outListExits:f}},L=function(e,r,t,u,c,l){var a,f,s=[].concat(e).filter((function(e){return null!=e})).map((function(e){return o(e)?e:{node:e}})).map((function(e){var r,t;return n({},e,{preventDefault:null===(r=e.preventDefault)||void 0===r||r,delay:null!==(t=e.delay)&&void 0!==t?t:l,type:void 0===e.type?[null==e.key?"":"keydown",null==e.node?"":"click"].filter((function(e){return""!==e})):[].concat(e.type),key:g(e.key)})})).reduce(x,[]),d=i(r)?r:!0===r?null!==(a=null===(f=s[0])||void 0===f?void 0:f.on)&&void 0!==a?a:function(){}:r;return[i(d)?{node:null,key:[v],on:d,target:t?u:c,type:["keydown"]}:null].concat(s).filter((function(e){return null!=e}))},P=function(e,n){var r=function(){var r=i(e),t=r&&e(n),o=r&&"[object Promise]"===u(t)&&"function"==typeof t.then,c=r&&!o,l=!o&&!c;return{promiseDelay:o,callbackDelay:c,commonDelay:l,delayRes:t}}(),t=r.promiseDelay,o=r.callbackDelay,c=r.commonDelay,l=r.delayRes;t?l.then(n):o||c&&n()},S=function(e,n,r,t,u,o,c,a){var f=function(e){return null==e||!0===e};if(f(e))return s();if(i(e)){var v=e({e:a,list:r,cover:n,root:t,last:r[o],lastI:o});return f(v)?s():v}return l(e);function s(){return u?n:c}},C=function(){function e(){this.cache=[],this.isEmpty=!0}var n=e.prototype;return n.push=function(e,n,r){this.isEmpty=!1,this.cache.push({node:e,type:n,handler:r})},n.clean=function(){this.cache=[],this.isEmpty=!0},n.addListeners=function(){this.cache.forEach((function(e){var n;return null===(n=e.node)||void 0===n?void 0:n.addEventListener(e.type,e.handler)}))},n.removeListeners=function(){this.cache.forEach((function(e){var n;return null===(n=e.node)||void 0===n?void 0:n.removeEventListener(e.type,e.handler)})),this.clean()},e}(),B=function(){function e(){this.cache=new Map}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.push=function(e,n,r){this.has(e)||(n.addEventListener("keydown",r),this.cache.set(e,{node:n,handler:r}))},n.remove=function(e){var n=this;[].concat(e).forEach((function(e){return n.cache.get(e).node.removeEventListener("keydown",n.cache.get(e).handler)}))},e}(),D=function(){function n(){this.data=[],this.head=null,this.tail=null,this.prevI=-1,this.curI=-1,this._prev=null,this._cur=null,this.rangeBeforePrevCallback=!1,this.rangeBeforeNextCallback=!1}var r,t,u,o=n.prototype;return o.update=function(e){this.data.splice(0,this.data.length),Array.prototype.push.apply(this.data,e),this.head=e[0],this.tail=e.at(-1)},o.isEmpty=function(){return 0===this.data.length},o.has=function(e){return!!this.data[e]},o.record=function(e,n){this.recordPrev(this.cur,this.curI),this.recordCur(e,n)},o.recordRange=function(e){this.cur===e||null==this.cur&&null==e||this.record(e,-1)},o.recordPrev=function(e,n){this.prevI=n<0?-1:n,this.prev=e||null},o.recordCur=function(e,n){this.curI=n<0?-1:n,this.cur=e||null},o.recordSequenceByIdx=function(e){var n=this.data[e];this.curI===e||this.curI<0&&e<0||this.record(n,e)},r=n,(t=[{key:"prev",get:function(){return this._prev||this.data[this.prevI]||null},set:function(e){this._prev=e}},{key:"cur",get:function(){return this._cur||this.data[this.curI]||null},set:function(e){this._cur=e}}])&&e(r.prototype,t),u&&e(r,u),Object.defineProperty(r,"prototype",{writable:!1}),n}();return function(){var e,r,t=0-((arguments.length<=0?void 0:arguments[0])instanceof Array),u=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],s=1+t<0||arguments.length<=1+t?void 0:arguments[1+t],A=null!==(e=2+t<0||arguments.length<=2+t?void 0:arguments[2+t])&&void 0!==e?e:{};if(!(Array.isArray(s)&&s.length>1))throw new Error("请至少传入一个数组，数组至少包含两个可聚焦元素，用来表示列表的头和尾。");var j=A.sequence,K=A.loop,R=A.next,T=A.prev,F=A.trigger,O=A.entry,q=A.exit,M=A.onEscape,_=A.onClick,N=A.onMove,U=A.cover,$=A.initialActive,z=A.correctionTarget,G=A.delayToFocus,H=A.delayToBlur,J=A.removeListenersEachExit,Q=void 0===J||J,V=A.removeListenersEachEnter,W=A.addEntryListenersEachExit,X=void 0===W||W,Y=A.stopPropagation,Z=void 0!==Y&&Y,ee=A.preventDefault,ne=A.manual,re=A.allowSafariToFocusAfterMousedown,te=void 0===re||re,ue=[].concat(O).filter((function(e){return null!=e})).map((function(e){return o(e)?e:{node:e}})).map((function(e){var r,t;return n({},e,{preventDefault:null===(r=e.preventDefault)||void 0===r||r,delay:null!==(t=e.delay)&&void 0!==t?t:G,type:void 0===e.type?[null==e.key?"":"keydown",null==e.node?"":"click"].filter((function(e){return""!=e})):[].concat(e.type),onExit:!0===e.onExit?e.on:e.onExit,key:g(e.key)})})).reduce(x,[]),oe=0===ue.length,ie=new Set(ue.map((function(e){return i(e.onExit)?e.node:null})).filter((function(e){return null!=e})).map((function(e){return l(e)}))),ce=l(F||(null===(r=ue[0])||void 0===r?void 0:r.node)),le=o(U)?U:{},ae=le.node,fe=le.enterKey,ve=le.onEnter,se=le.exit,de=null!=U&&!1!==U&&!1!==ae,pe=de&&(!0===U||!0===ae||null==ae),he=[].concat(se).filter((function(e){return null!=e})).map((function(e){return o(e)?e:{key:e}})).map((function(e){var r;return n({},e,{target:null!==(r=e.target)&&void 0!==r?r:ce,key:g(e.key)})})),ye=de&&0===he.length,Ie=new D,ge=null,me=null;Ie.recordPrev(null,null!=$?$:-1);var ke=o(R)?R:{key:R},Ee=n({},ke,{key:g(ke.key,d)}),be=Ee.key,xe=Ee.on,we=o(T)?T:{key:T},Le=n({},we,{key:g(we.key,p)}),Pe=Le.key,Se=Le.on,Ce=!1===M,Be=!(null==K||K),De=!!(R||T||j),Ae=null!=ee?ee:De,je=!1,Ke=!1,Re=new C,Te=new C,Fe=new B;if(!ne&&(Ge(),(oe?[{}]:ue).some((function(e){return!e.delay})))){var Oe=b(u,s,ae,pe),qe=Oe.root,Me=Oe.list,_e=Oe.cover;Ie.update(Me),ze(ge=qe,Ie,me=_e)}var Ne={enter:function(e){if(ce=ce||c(),e)return Ue({fromInvoke:!0},e.on,e.target,e.delay);for(var n=function(){var e=ue[r],n=e.on,t=e.type,u=e.node,o=e.target,i=e.delay;if(null!=t&&t.some((function(e){return null==e||!1===e||"invoke"===e}))||null==u)return{v:Ue({fromInvoke:!0},n,o,i)}},r=0;r<ue.length;++r){var t=n();if("object"==typeof t)return t.v}return Ue({fromInvoke:!0})},exit:function(e){var n=b(u,s,ae,pe),r=n.list,t=n.cover,o=n.root;if(e){var i=e.on,c=e.target;return p(l(c),i)}for(var a=L(q,M,de,t,ce,H),f=function(){var e=a[v],n=e.on,r=e.type,t=e.target;if(null!=r&&r.some((function(e){return null==e||!1===e||"invoke"===e})))return{v:p(t,n)}},v=0;v<a.length;++v){var d=f();if("object"==typeof d)return d.v}function p(e,n){return Ie.isEmpty()&&Ie.update(r),$e({fromInvoke:!0},n,e,!1,t,Ie.data,o)}},removeListeners:function(){Re.removeListeners(),Te.removeListeners()},removeListRelatedListeners:function(){Re.removeListeners()},removeEntryListeners:function(){Te.removeListeners()},addEntryListeners:function(){Ge()},addListRelatedListeners:function(){var e=b(u,s,ae,pe),n=e.root,r=e.list,t=e.cover;Ie.isEmpty()&&Ie.update(r),ze(n,Ie,t)},addForward:function(e,n){var r=null;if(i(n)){var t=b(u,s,ae,pe);r=n({root:t.root,list:t.list,head:t.head,tail:t.tail,cover:t.cover,curI:Ie.curI,prevI:Ie.prevI})}else r=n;var o=r,c=o.node,a=o.on,f=o.key,v=o.target,d=l(c),p=l(v),h=g(f);Fe.push(e,d,(function(e){I(h,e,Ie.prevI,Ie.curI)&&(e.preventDefault(),null==a||a(),y(p))}))},removeForward:function(e){Fe.remove(e)},updateList:function(e){var n=e.map((function(e){return l(e)})).filter((function(e){return null!=e}));Ie.update(n)},i:function(e){if(Ie.has(e)&&je){Ie.recordSequenceByIdx(e);var n=Ie.prev,r=Ie.prevI,t=Ie.cur,u=Ie.curI;return null==N||N({e:{fromI:!0},prev:n,prevI:r,cur:t,curI:u}),h(s[u]),e}return Ie.curI<0?Ie.prevI:Ie.curI}};return Ne;function Ue(e,n,r,t,o,i){var c,l;function a(){if(Ie.isEmpty()){var n=k(s).list;Ie.update(n)}null==ge&&(ge=m(u,Ie.head,Ie.tail)),null==me&&de&&(me=E(ae,pe,ge)),ne||ze(ge,Ie,me),!1!==r&&function(n,t,u){var o=t.data,i=t.prev,c=t.head,l=t.curI,a=i||c,f=S(r,n,o,u,de,l,a,e);if(De){var v=o.indexOf(f);if(v>-1){t.recordSequenceByIdx(v);var s=t.cur,d=t.curI;null==N||N({e:e,prev:null,cur:s,prevI:-1,curI:d}),je=!0}}else if(u.contains(f)&&f!==n){t.recordRange(f);var p=t.cur,h=t.curI;null==N||N({e:e,prev:null,cur:p,prevI:-1,curI:h}),je=!0}!de||f!==n&&!0!==je||(Ke=!0);y(f)}(me,Ie,ge)}Ke||je||(o&&(null===(c=e.preventDefault)||void 0===c||c.call(e)),i&&(null===(l=e.stopPropagation)||void 0===l||l.call(e)),Promise.resolve(null==n?void 0:n(e)).then((function(e){P(t,a)})))}function $e(e,n,r,t,u,o,c,l,a,f){var v,s;if(!je||i(l)&&!l({e:e,prev:Ie.prev,cur:Ie.cur,prevI:Ie.prevI,curI:Ie.curI}))return!1;a&&(null===(v=e.preventDefault)||void 0===v||v.call(e)),f&&(null===(s=e.stopPropagation)||void 0===s||s.call(e)),De?Ie.recordSequenceByIdx(-1):Ie.recordRange(null),je=!1;var d=S(r,u,o,c,de,Ie.curI,ce,e);return d?function(){function r(){ne||(d!==u&&He(),X&&Ge()),null==N||N({e:e,prev:Ie.prev,cur:null,prevI:Ie.prevI,curI:-1}),h(d)}Promise.resolve(null==n?void 0:n(e)).then((function(e){P(t,r)}))}():function(){function r(n){return function(r){ne||(He(),X&&Ge()),null==N||N({e:e,prev:Ie.prev,cur:null,prevI:Ie.prevI,curI:-1}),n&&h(n)}}Promise.resolve(null==n?void 0:n(e)).then((function(e){if(!1!==d){var n=r(ce);P(t,n)}else{r()()}}))}()}function ze(e,n,r){var t=n.data,o=n.head,s=n.tail;if(Re.isEmpty){if(null==e)throw new Error("没有找到元素 "+u+"，您可以尝试 delayToFocus 选项，等待元素 "+u+" 渲染完毕后进行聚焦。");if(null==o||null==s)throw new Error("至少需要包含两个可以聚焦的元素，如果元素需要等待渲染，您可以尝试 delayToFocus 选项。");!function(){var u=!1,o=function(){return!!oe||je},g=De?function(e){if(e.target===r)return;if(!o())return;var u=[n.curI,n.recordSequenceByIdx.bind(n)],i=u[0],c=u[1],l=Math.max(0,i),a=t.length,f=!1;if(I(be,e,n.prevI,n.curI)){var v=l+1,s=Be?Math.min(a-1,v):v;s%=a,null==xe||xe({e:e,prev:t[l],cur:t[s],prevI:l,curI:s}),null==N||N({e:e,prev:t[l],cur:t[s],prevI:l,curI:s}),c(s),h(t[s]),f=!0}else if(I(Pe,e,n.prevI,n.curI)){var d=l-1,p=Be?Math.max(0,d):d;p=(p+a)%a,null==Se||Se({e:e,prev:t[l],cur:t[p],prevI:l,curI:p}),null==N||N({e:e,prev:t[l],cur:t[p],prevI:l,curI:p}),c(p),h(t[p]),f=!0}("Tab"===e.key||f)&&Ae&&e.preventDefault(),f&&Z&&e.stopPropagation()}:function(u){var i=t[0],c=t.at(-1),l=u.target;if(l===r)return;if(!o())return;var a=!1,f=!1;d(u)?(n.recordRange(l),n.rangeBeforeNextCallback=!0,l===c&&(a=!0,Be||h(i)),l===e&&(a=!0,h(i)),f=!0):p(u)&&(n.recordRange(l),n.rangeBeforePrevCallback=!0,l===i&&(a=!0,Be||h(c)),l===e&&(a=!0,h(c)),f=!0);(a||f&&Ae)&&u.preventDefault();f&&Z&&u.stopPropagation()},m=L(q,M,de,r,ce,H),k=w(m,e),E=k.keyExits,b=k.clickExits,x=k.focusExits,P=k.hasClickExits,S=k.hasFocusExits,C=k.hasKeyExits,B=k.clickExits_wild,D=k.focusExits_wild,A=k.outListExits,j=B.map((function(e){return[l(null==e?void 0:e.node),Q(e)]})),K=D.map((function(e){return[l(null==e?void 0:e.node),V(e)]}));Re.push(e,"focusin",(function(o){var i=o.target,c=o.relatedTarget;if(u)return void(u=!1);if(de&&i===r)return void(Ke=!0);if(de&&!1===T&&!1===Ke)return void y(r);if(n.rangeBeforePrevCallback||n.rangeBeforeNextCallback){var a;n.recordRange(i),n.rangeBeforePrevCallback=!1,n.rangeBeforeNextCallback=!1;var f=n.cur,v=n.prev;return null===(a=n.rangeBeforePrevCallback?xe:Se)||void 0===a||a({e:o,prev:v,cur:f,prevI:-1,curI:-1}),void(null==N||N({e:o,prev:v,cur:f,prevI:-1,curI:-1}))}if(!1!==z&&!1===je&&!1===T&&(null==c||!e.contains(c))){var s,d=n.prev||n.head,p=null!==(s=null==z?void 0:z({list:t,cover:r,root:e,last:n.prev,lastI:n.prevI,e:o}))&&void 0!==s?s:d,h=l(p);I(h),y(h)}!1!==z||!1!==je||!1!==T||null!=c&&e.contains(c)||I(i);function I(e){if(De){var r=t.findIndex((function(n){return n===e}));r>-1&&(n.recordSequenceByIdx(r),null==N||N({e:o,prev:null,cur:n.cur,prevI:-1,curI:n.curI}),je=!0)}else n.recordRange(e),null==N||N({e:o,prev:null,cur:n.cur,prevI:-1,curI:n.curI}),je=!0}})),Re.push(e,"focusout",(function(t){if(R)return R=!1;a((function(){var u=c(),o=!e.contains(u),i=u===r;if(t.target===r&&o)Ke=!1;else{var l=null;(i||o)&&(l=O(t),De?n.recordSequenceByIdx(-1):n.recordRange(null)),!1!==l&&(i?je=!1:o&&(je=!1,Ke=!1))}}))})),e.contains(r)||null==r||(Re.push(r,"focus",(function(){Ke=!0})),Re.push(r,"blur",(function(){F?F=!1:Ke=!1})));Re.push(e,"keydown",(function(e){var n=!1;C&&(n=function(e){if(e.target===r)return;if(Ce&&v(e))return;for(var n=0;n<E.length;++n){if(J(e,E[n]))return!0}}(e)),n||g(e)})),Re.push(e,"click",(function(e){!function(e){var r=e.target;if(De){var u=t.findIndex((function(e){return e.contains(r)}));if(u>-1){var o=n.prev,i=n.prevI,c=n.curI;n.recordSequenceByIdx(u);var l=n.prev,a=n.prevI,f=n.cur,v=n.curI;c<0&&i!==u&&(l=o,a=i),null==_||_({e:e,prev:l,cur:f,prevI:a,curI:v}),c!==v&&(null==N||N({e:e,prev:l,cur:f,prevI:a,curI:v}))}}else{var s=n.prev,d=n.cur;n.recordRange(r);var p=n.prev,h=n.cur;null==d&&s!==r&&(p=s),null==_||_({e:e,prev:p,cur:h,prevI:-1,curI:-1}),d!==h&&(null==N||N({e:e,prev:p,cur:h,prevI:-1,curI:-1}))}}(e),P&&function(e){for(var n=0;n<b.length;++n){if($(e,b[n]))break}}(e)})),Re.push(e,"mousedown",(function(e){var n;T=!0,a((function(){return T=!1})),(!De||De&&(n=t.find((function(n){return n.contains(e.target)}))))&&(je=!0,de&&(Ke=!0),te&&n&&void 0!==window.safari&&(h(n),e.preventDefault()))})),S&&Re.push(e,"focusin",(function(e){for(var n=0;n<x.length;++n){if(G(e,x[n]))break}}));K.forEach((function(e){var n=e[0],r=e[1];Re.push(n,"focus",r)})),j.forEach((function(e){var n=e[0],r=e[1];Re.push(n,"click",r)})),null!=r&&Re.push(r,"keydown",(function(e){if(e.target!==r)return;if(!Ke||je)return;if((null!=fe?fe:f)(e)&&!je)return e.preventDefault(),F=!0,je=!0,null==ve||ve(e),void(De?(n.recordSequenceByIdx(Math.max(0,n.prevI)),h(n.cur),null==N||N({e:e,prev:null,cur:n.cur,prevI:-1,curI:n.curI})):(n.recordRange(null==n.prev?n.head:n.prev),h(n.cur),null==N||N({e:e,prev:null,cur:n.cur,prevI:-1,curI:-1})));for(var t=0;t<he.length;++t){var o=he[t],i=o.key,c=o.on,a=o.target,v=l(a);if(I(i,e,n.prevI,n.curI))return void p(e,c,v)}if(ye&&d(e))return u=!0,void h(s);function p(e,n,r){null==n||n(e),r&&h(r),He()}}));var R=!1;A&&ie.forEach((function(e){Re.push(e,"mousedown",(function(e){return R=!0}))}));Re.addListeners();var T=!1,F=!1;function O(n){for(var u=0;u<A.length;++u){var o=A[u],i=o.on,c=o.target,a=o.delay,f=o.preventDefault,v=o.stopPropagation;return $e(n,i,l(c),a,r,t,e,A[u].if,f,v)}}function U(t,u,o){var c=u.node,a=u.on,f=u.target,v=u.delay,s=u.preventDefault,d=u.stopPropagation,p=n.data,h=n.head,y=n.tail,I=i(c)?c({list:p,head:h,tail:y}):c,g=l(I),m=l(f);return!o(t,g,u.key)&&!1!==$e(t,a,m,v,r,p,e,u.if,s,d)}function $(e,n){return U(e,n,(function(e,n){return null!=n&&!n.contains(e.target)||null==n}))}function G(e,n){return U(e,n,(function(e,n){return null!=n&&e.target!==n||null==n}))}function J(e,r){return U(e,r,(function(e,r,t){return null!=r&&e.target!==r||!I(t,e,n.prevI,n.curI)}))}function Q(e){return function(n){$(n,e)}}function V(e){return function(n){G(n,e)}}}()}}function Ge(){if(Te.isEmpty){for(var e=function(){var e=ue[n],r=e.node,t=e.on,o=e.key,c=e.type,a=e.target,f=e.delay,v=e.onExit,d=e.preventDefault,p=e.stopPropagation,h=e.if,y=[].concat(c),g=["keydown","focus","click"],m=l(r);y.forEach((function(e){if(m&&g.includes(e)){var n="keydown"===e?function(e){return I(o,e,Ie.prevI,Ie.curI)}:function(e){return!0};Te.push(m,e,function(e){return function(n){i(h)&&!h({e:n,prev:Ie.prev,cur:Ie.cur,prevI:Ie.prevI,curI:Ie.curI})||!e(n)||function(e){if(je){if(i(v)){var n=b(u,s,ae,pe),r=n.list,o=n.cover,c=n.root;$e(e,v,a,!1,o,r,c,null,d,p)}}else Ue(e,t,a,f,d,p),V&&!ne&&Te.removeListeners()}(n)}}(n))}}))},n=0;n<ue.length;++n)e();Te.addListeners()}}function He(){ye||Q&&!ne&&Re.removeListeners()}}}));
//# sourceMappingURL=focus-fly.umd.min.js.map
